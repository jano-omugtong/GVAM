<%- include('partials/header') %>
<div class="form-container">
    <h2>Login</h2>
    <% if(locals.error && !locals.modal) { %>
        <div class="alert alert-danger"><%= error %></div>
    <% } %>
    <% if(locals.success) { %>
        <div class="alert alert-success"><%= success %></div>
    <% } %>
    <form method="post">
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" name="username" id="username" value="<%= locals.username || '' %>" class="form-control" required autofocus/>
        </div>
        <div class="form-group">
            <label for="password">Password</label>
            <input type="password" name="password" id="password" class="form-control" required/>
        </div>
        <div class="form-group">
            <input type="hidden" name="formType" value="login"/>
            <button type="submit" class="btn btn-primary">Login</button>
            <a href="/register" class="btn btn-link">Register</a>
            <a href="#forgotPass" data-toggle="modal" class="btn btn-link pull-right">Forgot password?</a>
        </div>
    </form>
</div>

<div class="modal fade" id="forgotPass" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Account Help</h4>
            </div>
            <% if(locals.modal) { %>
                <div class="alert alert-danger"><%= error %></div>
            <% } %>
            <form method="post">
            <div class="modal-body">
                <h5>Type-in your email address to recover your account</h5>
                <input type="email" required placeholder="sample@email.com" name="email" id="forgotPassEmail" value="<%= locals.email || '' %>" class="form-control"/>
            </div>
            <div class="modal-footer">
                <input type="hidden" name="formType" value="forgotPass"/>
                <button type="submit" class="btn btn-primary">Send</button>
                <a class="btn btn-default" data-dismiss="modal">Close</a>
            </div>
        </form>
        </div>
    </div>
</div>

<% if(locals.modal) { %>
    <script type="text/javascript">
        $(window).on('load',function(){
            $('#forgotPass').modal('show');
        });
    </script>
<% } %>

<%- include('partials/footer') %>